{"version":3,"sources":["services/httpService.js","config.js","services/authService.js","components/navbar/NavbarBrand.jsx","components/navbar/NavbarDropdown.jsx","components/navbar/NavbarMenu.jsx","components/navbar/Navbar.jsx","components/form/Select.jsx","components/combat/SupportToon.jsx","components/combat/Support.jsx","components/form/MultiSelect.jsx","components/form/Input.jsx","components/combat/OffenseToon.jsx","components/combat/Offense.jsx","components/combat/DefenseToon.jsx","components/combat/DefenseEnemy.jsx","components/combat/Defense.jsx","components/combat/ActionBlock.jsx","components/combat/CombatLog.jsx","components/combat/Statuses.jsx","components/combat/ToonLine.jsx","components/combat/ToonList.jsx","components/combat/Attacks.jsx","components/combat/EnemyLine.jsx","components/combat/EnemyList.jsx","components/combat/StatusPane.jsx","components/combat/TitleBlock.jsx","components/FightCombat.jsx","components/form/Form.jsx","components/form/Enemy.jsx","components/form/Enemies.jsx","components/FightCreator.jsx","components/Register.jsx","components/Login.jsx","components/Logout.jsx","components/form/ButtonedNumber.jsx","components/ToonCard.jsx","components/form/WeaponSelector.jsx","components/ToonEditor.jsx","components/ToonLister.jsx","components/App.jsx","serviceWorker.js","index.js"],"names":["axios","interceptors","response","use","e","status","console","error","toast","Promise","reject","options","url","a","get","data","post","created","put","updated","setJwt","jwt","defaults","headers","common","process","api","base","account","http","config","user","localStorage","setItem","message","email","password","getJwt","getItem","register","login","logout","removeItem","getCurrentUser","jwtDecode","NavbarBrand","onToggle","className","src","alt","width","to","role","aria-label","aria-expanded","data-target","onClick","aria-hidden","NavbarDropdown","requiredPermissions","label","link","list","allowCreate","permissions","includes","Fragment","capitalize","slice","map","item","key","_id","name","NavbarMenu","toons","fights","isOpen","id","Navbar","state","burgerIsOpen","handleToggle","setState","handleClick","this","props","Component","Select","value","onChange","disabled","constraint","o","constraintMessage","htmlFor","toUpperCase","me","currentTarget","option","title","SupportToon","quickAction","isValid","target","modifier","submitting","handleActionChange","handleTargetChange","sel","handleModifierChange","renderToonSelect","myToon","filter","t","toon","renderWithToons","renderInspire","renderHarry","handleSubmit","from","action","with","doSubmit","onSubmit","prevProps","prevState","snapshot","done","current_hp","type","Support","fight","myToons","toonObjects","MultiSelect","multiple","array","Array","prototype","call","selectedOptions","Input","caps","checkChange","getModifierState","onKeyPress","placeholder","renderIcons","OffenseToon","roll","length","Number","isInteger","handleRollChange","Math","max","min","renderHeal","renderEnemyTargetSelect","enemies","enemy","renderAttack","renderPreciseAttack","Offense","DefenseToon","attack","DefenseEnemy","tankBusterBonus","handleBusterChange","val","renderTankBuster","Defense","myToonIds","myAttacks","attacks","isADm","log","ActionBlock","phase","CombatLog","listening","event","JSON","parse","ts","Date","now","msg","sortWithFunction","log1","log2","stream","addEventListener","updateLog","bind","date","hh","String","getHours","padStart","mm","getMinutes","ss","getSeconds","style","display","height","overflowY","line","formatTime","Statuses","statuses","renders","is_covering","find","covering","push","is_covered","covered_by","is_harrying","harrying_with","is_inspiring","inspiring","inspiring_to","is_inspired","inspired","insp","by","is_guarding","guarding","is_guarded","guarded_by","guard","is_parrying","r","ToonLine","armor","main_hand","off_hand","trait","hp","ready","color","drawReadySign","ToonList","Attacks","bonus","EnemyLine","isDm","drawDeadSign","EnemyList","StatusPane","TitleBlock","round","onAdvance","advancing","onDelete","deleting","FightCombat","match","allToons","history","useState","setAdvancing","setDeleting","setListening","f","params","useEffect","info","audio","Audio","play","deleted","warn","replace","advanceFight","deleteFight","window","confirm","fightToonIds","toonIds","Form","errors","validate","schema","abortEarly","then","valid","catch","inner","path","validateProperty","yup","regex","preventDefault","Object","keys","handleChange","errorMessage","renderBody","buttonLabel","Enemy","index","onRemove","k","v","dc","ab","Enemies","errorIndex","parseInt","zip","clone","removeEnemy","splice","zipped","FightCreator","shape","required","matches","RegExp","regexes","of","integer","positive","success","Register","password_confirmation","resolve","auth","location","Login","Logout","ButtonedNumber","readOnly","ToonCard","gender","race","physical","magical","leadership","stats","Smashing","smashing","Dodging","dodging","Entropy","entropy","Harmony","harmony","Moxie","moxie","Wit","wit","float","toLowerCase","WeaponSelector","mainHand","offHand","weapons","wholeMainHand","w","wholeOffHand","empty","hands","ToonEditor","traits","armors","genders","races","is_new","httpService","getStateReadyToon","fetchToon","resp","traitId","armorId","mhId","ohId","wholeTrait","wholeArmor","render","ToonLister","App","EventSource","onopen","i","findIndex","stateSplice","close","component","Boolean","hostname","smallerThan","ascending","needSwapping","b","j","tmp","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.350bb5a5.chunk.js","sourcesContent":["import axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport * as https from \"https\";\n\naxios.interceptors.response.use(null, (e) => {\n  if (!(e.response && e.response.status >= 400 && e.response.status < 500)) {\n    console.error(\"Unexpected server error:\", e);\n    toast.error(\"An unexpected server error occurred, pester Mel on Discord!\");\n  }\n  return Promise.reject(e);\n});\n\nconst options = {};\nif (process.env.NODE_ENV !== \"production\") {\n  options.httpsAgent = new https.Agent({\n    rejectUnauthorized: false,\n  });\n}\n\nfunction setJwt(jwt) {\n  axios.defaults.headers.common[\"x-auth-token\"] = jwt;\n}\n\nasync function get(url) {\n  const { data } = await axios.get(url, options);\n  return data;\n}\n\nasync function post(url, data) {\n  const { data: created } = await axios.post(url, data, options);\n  return created;\n}\n\nasync function put(url, data) {\n  const { data: updated } = await axios.put(url, data, options);\n  return updated;\n}\n\nexport default {\n  get,\n  post,\n  put,\n  setJwt,\n};\n","const prod = {\n  api: \"https://yemit-break.com/api/\",\n  base: \"https://yemit-break.com/\",\n};\nconst dev = {\n  api: \"https://localhost:3443/api/\",\n  base: \"http://localhost:3000/\",\n};\n\nexport default process.env.NODE_ENV === \"development\" ? dev : prod;\n","import http from \"./httpService\";\nimport { toast } from \"react-toastify\";\nimport jwtDecode from \"jwt-decode\";\n\nimport config from \"../config\";\n\nconst key = \"token\";\n\nhttp.setJwt(getJwt());\n\nexport async function register(account) {\n  try {\n    const user = await http.post(config.api + \"users\", account);\n    localStorage.setItem(key, user.jwt);\n    return user;\n  } catch (e) {\n    const { data } = e.response;\n    toast.error(data.message);\n    return false;\n  }\n}\n\nexport async function login(email, password) {\n  try {\n    const user = await http.post(config.api + \"users/login\", {\n      email,\n      password,\n    });\n    localStorage.setItem(key, user.jwt);\n    return user;\n  } catch (e) {\n    const { data } = e.response;\n    toast.error(data.message);\n    return false;\n  }\n}\n\nexport function logout() {\n  localStorage.removeItem(key);\n}\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(key);\n    return jwtDecode(jwt);\n  } catch (e) {\n    return null;\n  }\n}\n\nexport function getJwt() {\n  return localStorage.getItem(key);\n}\n\nexport default {\n  register,\n  login,\n  logout,\n  getCurrentUser,\n  getJwt,\n};\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction NavbarBrand({ onToggle }) {\r\n  return (\r\n    <div className=\"navbar-brand\">\r\n      <img\r\n        className=\"navbar-item\"\r\n        src=\"logo192.png\"\r\n        alt=\"The League\"\r\n        width=\"65\"\r\n      />\r\n      <Link className=\"navbar-item\" to=\"/all-toons\">\r\n        Yemit Break\r\n      </Link>\r\n      <a\r\n        role=\"button\"\r\n        className=\"navbar-burger burger\"\r\n        aria-label=\"menu\"\r\n        aria-expanded=\"false\"\r\n        data-target=\"navbarMenu\"\r\n        onClick={onToggle}\r\n      >\r\n        <span aria-hidden=\"true\" />\r\n        <span aria-hidden=\"true\" />\r\n        <span aria-hidden=\"true\" />\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NavbarBrand;\r\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction NavbarDropdown({ user, label, link, list, onClick }) {\n  let requiredPermissions;\n  switch (label) {\n    case \"Toons\":\n      requiredPermissions = \"Player\";\n      break;\n    case \"Fights\":\n    default:\n      requiredPermissions = \"DM\";\n  }\n  const allowCreate =\n    user && user.permissions && user.permissions.includes(requiredPermissions);\n  return (\n    <div className={\"navbar-item has-dropdown is-hoverable\"}>\n      <div className=\"navbar-link is-arrowless\">{label}</div>\n      <div className=\"navbar-dropdown\">\n        {allowCreate && (\n          <React.Fragment>\n            <Link className=\"navbar-item\" to={link} onClick={onClick}>\n              Create a new {label.capitalize().slice(0, -1)}\n            </Link>\n            <hr className=\"navbar-divider\" />\n          </React.Fragment>\n        )}\n        {list.map((item) => {\n          return (\n            <Link\n              key={item._id}\n              className=\"navbar-item\"\n              to={`${link}/${item._id}`}\n              onClick={onClick}\n            >\n              {item.name}\n            </Link>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport default NavbarDropdown;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport NavbarDropdown from \"./NavbarDropdown\";\n\nfunction NavbarMenu({ user, toons, fights, isOpen, onToggle }) {\n  return (\n    <div className={`navbar-menu ${isOpen ? \"is-active\" : \"\"}`} id=\"navbarMenu\">\n      <div className=\"navbar-start\">\n        <Link className=\"navbar-item\" to=\"/all-toons\" onClick={onToggle}>\n          All The Toons\n        </Link>\n        {user && (\n          <NavbarDropdown\n            user={user}\n            label=\"Toons\"\n            link=\"/my-toon\"\n            list={toons}\n            onClick={onToggle}\n          />\n        )}\n        <NavbarDropdown\n          user={user}\n          label=\"Fights\"\n          link=\"/fight\"\n          list={fights}\n          onClick={onToggle}\n        />\n      </div>\n      <div className=\"navbar-end\">\n        <div className=\"navbar-item\">\n          <div className=\"buttons\">\n            {!user && (\n              <Link className=\"button is-light\" to=\"/login\" onClick={onToggle}>\n                Login\n              </Link>\n            )}\n            {!user && (\n              <Link\n                className=\"button is-primary\"\n                to=\"/register\"\n                onClick={onToggle}\n              >\n                Register\n              </Link>\n            )}\n            {user && (\n              <Link\n                className=\"button is-primary\"\n                to=\"/logout\"\n                onClick={onToggle}\n              >\n                Logout\n              </Link>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default NavbarMenu;\n","import React, { Component } from \"react\";\nimport NavbarBrand from \"./NavbarBrand\";\nimport NavbarMenu from \"./NavbarMenu\";\n\nclass Navbar extends Component {\n  state = {\n    burgerIsOpen: false,\n  };\n\n  handleToggle = (e) => {\n    this.setState({ burgerIsOpen: !this.state.burgerIsOpen });\n  };\n\n  handleClick = (e) => {\n    this.setState({ burgerIsOpen: false });\n  };\n\n  render() {\n    return (\n      <nav\n        className=\"navbar has-background-light\"\n        role=\"navigation\"\n        aria-label=\"main navigation\"\n      >\n        <NavbarBrand onToggle={this.handleToggle} />\n        <NavbarMenu\n          user={this.props.user}\n          toons={this.props.toons}\n          fights={this.props.fights}\n          isOpen={this.state.burgerIsOpen}\n          onToggle={this.handleClick}\n        />\n      </nav>\n    );\n  }\n}\n\nexport default Navbar;\n","import React from \"react\";\r\n\r\nfunction Select({\r\n  name,\r\n  value,\r\n  list,\r\n  options,\r\n  onChange,\r\n  disabled = false,\r\n  constraint = (o) => {\r\n    return true;\r\n  },\r\n  constraintMessage = (o) => {\r\n    return null;\r\n  },\r\n}) {\r\n  options = options || {};\r\n\r\n  return (\r\n    <div className=\"field\">\r\n      <label className=\"label\" htmlFor={name}>\r\n        {options.label || name[0].toUpperCase() + name.slice(1)}\r\n      </label>\r\n      <div className=\"control\">\r\n        <div className=\"select\">\r\n          <select\r\n            value={value}\r\n            id={name}\r\n            name={name}\r\n            onChange={({ currentTarget: me }) => {\r\n              onChange(me.name, me.value);\r\n            }}\r\n            disabled={disabled}\r\n          >\r\n            <option key=\"-1\" value=\"\" disabled={true}>\r\n              Pick one...\r\n            </option>\r\n            {list.map((option) => {\r\n              return (\r\n                <option\r\n                  key={option._id}\r\n                  value={option._id}\r\n                  disabled={!constraint(option)}\r\n                  title={constraintMessage(option)}\r\n                >\r\n                  {option.name}\r\n                </option>\r\n              );\r\n            })}\r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Select;\r\n","import React, { Component } from \"react\";\nimport { toast } from \"react-toastify\";\nimport Select from \"../form/Select\";\n\nclass SupportToon extends Component {\n  state = {\n    quickAction: \"\",\n    isValid: false,\n    target: \"\",\n    modifier: \"\",\n    submitting: false,\n  };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.submitting && this.props.myToon.quickAction) {\n      this.setState({ submitting: !this.props.myToon.quickAction });\n    }\n  }\n\n  handleActionChange = (name, value) => {\n    const state = {\n      quickAction: value,\n      target: \"\",\n      modifier: \"\",\n    };\n    switch (value) {\n      case \"Cover\":\n      case \"Inspire\":\n      case \"Guard\":\n      case \"Harry\":\n        state.isValid = false;\n        break;\n      case \"Pass\":\n      case \"Parry\":\n      default:\n        state.isValid = true;\n    }\n    this.setState(state);\n  };\n\n  handleTargetChange = ({ currentTarget: sel }) => {\n    switch (this.state.quickAction) {\n      case \"Cover\":\n      case \"Guard\":\n        this.setState({ target: sel.value, isValid: true });\n        break;\n      case \"Inspire\":\n      default:\n        this.setState({ target: sel.value, isValid: this.state.modifier });\n    }\n  };\n\n  handleModifierChange = (name, value) => {\n    switch (this.state.quickAction) {\n      case \"Inspire\":\n        this.setState({ modifier: value, isValid: this.state.target });\n        break;\n      case \"Harry\":\n      default:\n        this.setState({ modifier: value, isValid: true });\n    }\n  };\n\n  renderToonSelect = () => {\n    const { toons, myToon } = this.props;\n    return (\n      <div className=\"control\">\n        <div className=\"select\">\n          <select\n            onChange={this.handleTargetChange}\n            value={this.state.target}\n            disabled={myToon && myToon.quickAction}\n          >\n            <option value=\"\" disabled={true}>\n              Pick one...\n            </option>\n            {toons\n              .filter((t) => {\n                return t._id !== myToon._id;\n              })\n              .map((toon) => {\n                return (\n                  <option key={toon._id} value={toon._id}>\n                    {toon.name}\n                  </option>\n                );\n              })}\n          </select>\n        </div>\n      </div>\n    );\n  };\n\n  renderWithToons = (name) => {\n    return (\n      <div className=\"field\">\n        <label className=\"label\">{name + \":\"}</label>\n        {this.renderToonSelect()}\n      </div>\n    );\n  };\n\n  renderInspire = () => {\n    const { myToon } = this.props;\n    const list = [\n      { _id: \"Attack\", name: \"Attack\" },\n      { _id: \"Heal\", name: \"Heal\" },\n    ];\n    return (\n      <React.Fragment>\n        <div className=\"field\">\n          <label className=\"label\">Inspire:</label>\n          {this.renderToonSelect()}\n        </div>\n\n        <Select\n          name=\"to\"\n          value={this.state.modifier}\n          list={list}\n          onChange={this.handleModifierChange}\n          disabled={myToon && myToon.quickAction}\n        />\n      </React.Fragment>\n    );\n  };\n\n  renderHarry = () => {\n    const { myToon } = this.props;\n    const list = [\n      { _id: \"Smashing\", name: \"Smashing\" },\n      { _id: \"Entropy\", name: \"Entropy\" },\n    ];\n    return (\n      <Select\n        name=\"with\"\n        value={this.state.modifier}\n        list={list}\n        onChange={this.handleModifierChange}\n        disabled={myToon && myToon.quickAction}\n      />\n    );\n  };\n\n  handleSubmit = () => {\n    const { myToon } = this.props;\n    this.setState({ submitting: true });\n    switch (this.state.quickAction) {\n      case \"Cover\":\n        return {\n          name: \"Cover\",\n          from: myToon._id,\n          to: this.state.target,\n        };\n      case \"Inspire\":\n        return {\n          name: \"Inspire Offense\",\n          from: myToon._id,\n          to: this.state.target,\n          action: this.state.modifier,\n        };\n      case \"Guard\":\n        return {\n          name: \"Inspire Guard\",\n          from: myToon._id,\n          to: this.state.target,\n        };\n      case \"Harry\":\n        return {\n          name: \"Harry\",\n          from: myToon._id,\n          with: this.state.modifier,\n        };\n      case \"Pass\":\n        return {\n          name: \"Pass\",\n          from: myToon._id,\n        };\n      case \"Parry\":\n      default:\n        return {\n          name: \"Parry\",\n          from: myToon._id,\n        };\n    }\n  };\n\n  doSubmit = async () => {\n    const { onSubmit } = this.props;\n    try {\n      await onSubmit(this.handleSubmit());\n    } catch (e) {\n      const { response } = e;\n      const { status, data } = response;\n      if (status === 400 && data.message.includes(\"cover\")) {\n        toast.error(data.message);\n        this.setState({\n          quickAction: \"\",\n          isValid: false,\n          target: \"\",\n          modifier: \"\",\n          submitting: false,\n        });\n      } else {\n        console.error(\n          \"Unexpected error while posting toon support\",\n          e.response\n        );\n      }\n    }\n  };\n\n  render() {\n    const { myToon } = this.props;\n    const done = myToon && myToon.quickAction;\n    const quickActions = [\n      { _id: \"Cover\", name: \"Cover\" },\n      { _id: \"Inspire\", name: \"Inspire Action\" },\n      { _id: \"Guard\", name: \"Inspire Guard\" },\n      { _id: \"Parry\", name: \"Parry\" },\n      { _id: \"Harry\", name: \"Harry\" },\n      { _id: \"Pass\", name: \"Pass\" },\n    ];\n    return (\n      <div className=\"box\">\n        <h3 className=\"title is-3\">{`${myToon.name}'s quick action`}</h3>\n        <Select\n          name=\"action\"\n          value={this.state.quickAction}\n          list={quickActions}\n          options={{ label: \"Quick Action\" }}\n          onChange={this.handleActionChange}\n          disabled={done || myToon.current_hp < 0}\n        />\n        {!done &&\n          this.state.quickAction === \"Cover\" &&\n          this.renderWithToons(\"Cover\")}\n        {!done && this.state.quickAction === \"Inspire\" && this.renderInspire()}\n        {!done &&\n          this.state.quickAction === \"Guard\" &&\n          this.renderWithToons(\"Inspire Guard\")}\n        {!done && this.state.quickAction === \"Harry\" && this.renderHarry()}\n\n        <button\n          type=\"button\"\n          className={`button is-primary ${\n            this.state.submitting ? \"is-loading\" : \"\"\n          }`}\n          disabled={!this.state.isValid || done}\n          onClick={this.doSubmit}\n        >\n          Done\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default SupportToon;\n","import React from \"react\";\nimport SupportToon from \"./SupportToon\";\nimport config from \"../../config\";\nimport http from \"../../services/httpService\";\n\nfunction Support({ fight, myToons }) {\n  const toons = fight.toonObjects || [];\n\n  const handleSubmit = async (data) => {\n    let url = config.api + \"fights/\" + fight._id + \"/support/\";\n    switch (data.name) {\n      case \"Cover\":\n        url += \"cover\";\n        break;\n      case \"Inspire Offense\":\n        url += \"inspire\";\n        break;\n      case \"Inspire Guard\":\n        url += \"guard\";\n        break;\n      case \"Harry\":\n        url += \"harry\";\n        break;\n      case \"Pass\":\n        url += \"pass\";\n        break;\n      case \"Parry\":\n      default:\n        url += \"parry\";\n        break;\n    }\n    try {\n      await http.post(url, data);\n    } catch (e) {\n      throw e;\n    }\n  };\n\n  return (\n    <React.Fragment>\n      {myToons.map((toon) => {\n        return (\n          <SupportToon\n            key={toon._id}\n            toons={toons}\n            myToon={toon}\n            onSubmit={handleSubmit}\n          />\n        );\n      })}\n    </React.Fragment>\n  );\n}\n\nexport default Support;\n","import React from \"react\";\r\n\r\nfunction MultiSelect({\r\n  name,\r\n  value,\r\n  list,\r\n  options,\r\n  onChange,\r\n  constraint = (o) => {\r\n    return true;\r\n  },\r\n  constraintMessage = (o) => {\r\n    return null;\r\n  },\r\n}) {\r\n  options = options || {};\r\n\r\n  const handleChange = ({ currentTarget: sel }) => {\r\n    const array = Array.prototype.slice\r\n      .call(sel.selectedOptions)\r\n      .map((o) => o.value);\r\n    onChange(name, array);\r\n  };\r\n\r\n  return (\r\n    <div className=\"field\">\r\n      <label className=\"label\" htmlFor={name}>\r\n        {(options && options.label) || name[0].toUpperCase() + name.slice(1)}\r\n      </label>\r\n      <div className=\"control\">\r\n        <div className=\"select is-multiple\">\r\n          <select\r\n            id={name}\r\n            name={name}\r\n            multiple={true}\r\n            value={value}\r\n            onChange={handleChange}\r\n          >\r\n            {list.map((option) => {\r\n              return (\r\n                <option\r\n                  key={option._id}\r\n                  value={option._id}\r\n                  disabled={!constraint(option)}\r\n                  title={constraintMessage(option)}\r\n                >\r\n                  {option.name}\r\n                </option>\r\n              );\r\n            })}\r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MultiSelect;\r\n","import React, { Component } from \"react\";\n\nclass Input extends Component {\n  state = {\n    caps: false,\n  };\n\n  renderIcons() {\n    if (this.props.type === \"password\")\n      return (\n        <span className=\"icon is-small is-left\">\n          <i className=\"fas fa-lock\" />\n        </span>\n      );\n    if (this.props.name === \"email\")\n      return (\n        <span className=\"icon is-small is-left\">\n          <i className=\"fas fa-envelope\" />\n        </span>\n      );\n    if (this.props.name === \"name\")\n      return (\n        <span className=\"icon is-small is-left\">\n          <i className=\"fas fa-id-card\" />\n        </span>\n      );\n    if (this.props.name === \"roll\")\n      return (\n        <span className=\"icon is-small is-left\">\n          <i className=\"fas fa-dice-two\" />\n        </span>\n      );\n    if (this.props.name === \"buster\")\n      return (\n        <span className=\"icon is-small is-left\">\n          <i className=\"fas fa-hammer\" />\n        </span>\n      );\n    return null;\n  }\n\n  checkChange = (e) => {\n    if (this.props.type === \"password\")\n      this.setState({ caps: e.getModifierState(\"CapsLock\") });\n  };\n\n  render() {\n    let { type, name, value, onChange, options, error, disabled } = this.props;\n    options = options || {};\n    return (\n      <div className=\"field\">\n        <label className=\"label\" htmlFor={name}>\n          {options.label || name[0].toUpperCase() + name.slice(1)}\n        </label>\n        <div className=\"control has-icons-left\">\n          <input\n            type={type}\n            className=\"input\"\n            id={name}\n            name={name}\n            value={value}\n            onKeyPress={this.checkChange}\n            onChange={({ currentTarget: me }) => {\n              onChange(me.name, me.value);\n            }}\n            placeholder={options.placeholder || \"\"}\n            disabled={!!disabled}\n          />\n          {this.renderIcons()}\n        </div>\n        {this.state.caps && (\n          <p className=\"help has-text-warning-dark has-background-warning\">\n            \"CAPS lock is on!\"\n          </p>\n        )}\n        {error && <p className=\"help is-danger\">{error}</p>}\n      </div>\n    );\n  }\n}\n\nexport default Input;\n","import React, { Component } from \"react\";\nimport MultiSelect from \"../form/MultiSelect\";\nimport Input from \"../form/Input\";\nimport Select from \"../form/Select\";\n\nclass OffenseToon extends Component {\n  state = {\n    action: \"\",\n    isValid: false,\n    target: [],\n    modifier: \"\",\n    roll: 0,\n    submitting: false,\n  };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.submitting && this.props.myToon.action) {\n      this.setState({\n        submitting: !this.props.myToon.action,\n      });\n    }\n  }\n\n  handleActionChange = (name, value) => {\n    const state = {\n      action: value,\n      target: [],\n      roll: 0,\n      modifier: \"\",\n    };\n    switch (value) {\n      case \"Attack\":\n      case \"Heal\":\n      case \"Precise Attack\":\n        state.isValid = false;\n        break;\n      case \"Pass\":\n      default:\n        state.isValid = true;\n    }\n    this.setState(state);\n  };\n\n  handleTargetChange = (name, value) => {\n    switch (this.state.action) {\n      case \"Heal\":\n        this.setState({\n          target: value,\n          isValid: value && value.length && Number.isInteger(this.state.roll),\n        });\n        break;\n      case \"Attack\":\n        this.setState({\n          target: value,\n          isValid:\n            value &&\n            value.length &&\n            Number.isInteger(this.state.roll) &&\n            this.state.modifier,\n        });\n        break;\n      case \"Precise Attack\":\n        this.setState({\n          target: value,\n          isValid: value && value.length && this.state.modifier,\n        });\n        break;\n      case \"Pass\":\n      default:\n        this.setState({ target: value, isValid: true });\n    }\n  };\n\n  handleRollChange = (name, value) => {\n    value = Math.max(Math.min(value, 1000), 0);\n    switch (this.state.action) {\n      case \"Heal\":\n        this.setState({\n          roll: value,\n          isValid:\n            Number.isInteger(value) &&\n            this.state.target &&\n            this.state.target.length,\n        });\n        break;\n      case \"Attack\":\n        this.setState({\n          roll: value,\n          isValid:\n            Number.isInteger(value) &&\n            this.state.target &&\n            this.state.target.length &&\n            this.state.modifier,\n        });\n        break;\n      default:\n        this.setState({ roll: value, isValid: true });\n    }\n  };\n\n  handleModifierChange = (name, value) => {\n    switch (this.state.action) {\n      case \"Attack\":\n      case \"Heal\":\n        this.setState({\n          modifier: value,\n          isValid:\n            Number.isInteger(this.state.roll) &&\n            this.state.target &&\n            this.state.target.length,\n        });\n        break;\n      case \"Precise Attack\":\n      default:\n        this.setState({\n          modifier: value,\n          isValid: this.state.target && this.state.target.length,\n        });\n    }\n  };\n\n  renderHeal = () => {\n    const { toons } = this.props;\n    return (\n      <React.Fragment>\n        <MultiSelect\n          name=\"targets\"\n          value={this.state.target}\n          list={toons}\n          options={{ label: \"Healing:\" }}\n          onChange={this.handleTargetChange}\n        />\n        <Input\n          type=\"number\"\n          name=\"roll\"\n          value={this.state.roll}\n          onChange={this.handleRollChange}\n          error={null}\n        />\n      </React.Fragment>\n    );\n  };\n\n  renderEnemyTargetSelect = (enemies) => {\n    return (\n      <MultiSelect\n        name=\"targets\"\n        value={this.state.target}\n        list={enemies}\n        options={{ label: this.state.action }}\n        onChange={this.handleTargetChange}\n        constraint={(enemy) => {\n          return enemy.current_hp > 0;\n        }}\n        constraintMessage={(enemy) => {\n          return enemy.current_hp > 0 ? null : enemy.name + \"'s dead!\";\n        }}\n      />\n    );\n  };\n\n  renderAttack = () => {\n    const { enemies } = this.props;\n    return (\n      <React.Fragment>\n        {this.renderEnemyTargetSelect(enemies)}\n        <Select\n          name=\"modifier\"\n          value={this.state.modifier}\n          list={[\n            { _id: \"Smashing\", name: \"Smashing\" },\n            { _id: \"Entropy\", name: \"Entropy\" },\n          ]}\n          options={{ label: \"With:\" }}\n          onChange={this.handleModifierChange}\n        />\n        <Input\n          type=\"number\"\n          name=\"roll\"\n          value={this.state.roll}\n          onChange={this.handleRollChange}\n          error={null}\n        />\n      </React.Fragment>\n    );\n  };\n\n  renderPreciseAttack = () => {\n    const { enemies } = this.props;\n    return (\n      <React.Fragment>\n        {this.renderEnemyTargetSelect(enemies)}\n        <Select\n          name=\"modifier\"\n          value={this.state.modifier}\n          list={[\n            { _id: \"Smashing\", name: \"Smashing\" },\n            { _id: \"Entropy\", name: \"Entropy\" },\n          ]}\n          options={{ label: \"With:\" }}\n          onChange={this.handleModifierChange}\n        />\n      </React.Fragment>\n    );\n  };\n\n  handleSubmit = () => {\n    const { myToon } = this.props;\n    this.setState({ submitting: true });\n    switch (this.state.action) {\n      case \"Attack\":\n        return {\n          name: \"Attack\",\n          from: myToon._id,\n          to: this.state.target,\n          roll: this.state.roll,\n          with: this.state.modifier,\n        };\n      case \"Precise Attack\":\n        return {\n          name: \"Precise Attack\",\n          from: myToon._id,\n          to: this.state.target,\n        };\n      case \"Heal\":\n        return {\n          name: \"Heal\",\n          from: myToon._id,\n          to: this.state.target,\n          roll: this.state.roll,\n        };\n      default:\n        return {\n          name: \"Pass\",\n          from: myToon._id,\n        };\n    }\n  };\n\n  render() {\n    const { myToon, onSubmit } = this.props;\n    const done = myToon && myToon.action;\n    return (\n      <div className=\"box\">\n        <h3 className=\"title is-3\">{`${myToon.name}'s action`}</h3>\n        <Select\n          name=\"action\"\n          value={this.state.action}\n          list={[\n            { _id: \"Attack\", name: \"Attack\" },\n            { _id: \"Precise Attack\", name: \"Precise Attack\" },\n            { _id: \"Heal\", name: \"Heal\" },\n            { _id: \"Pass\", name: \"Pass\" },\n          ]}\n          onChange={this.handleActionChange}\n          disabled={done || myToon.current_hp < 0}\n          constraint={(o) => {\n            if (\n              myToon.quickAction === \"Harry\" ||\n              myToon.quickAction === \"Parry\" ||\n              myToon.quickAction === \"Cover\"\n            )\n              return o.name === \"Precise Attack\";\n            else return true;\n          }}\n          constraintMessage={(o) => {\n            return \"Only wit-based attacks allowed when covering, parrying or harrying\";\n          }}\n        />\n        {!done && this.state.action === \"Attack\" && this.renderAttack()}\n        {!done &&\n          this.state.action === \"Precise Attack\" &&\n          this.renderPreciseAttack()}\n        {!done && this.state.action === \"Heal\" && this.renderHeal()}\n\n        <button\n          type=\"button\"\n          className={`button is-primary ${\n            this.state.submitting ? \"is-loading\" : \"\"\n          }`}\n          disabled={!this.state.isValid || done}\n          onClick={() => {\n            onSubmit(this.handleSubmit());\n          }}\n        >\n          Done\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default OffenseToon;\n","import React from \"react\";\r\nimport OffenseToon from \"./OffenseToon\";\r\nimport config from \"../../config\";\r\nimport http from \"../../services/httpService\";\r\n\r\nfunction Offense({ fight, myToons }) {\r\n  const toons = fight.toonObjects || [];\r\n\r\n  const handleSubmit = async (data) => {\r\n    let url = config.api + \"fights/\" + fight._id + \"/offense/\";\r\n    switch (data.name) {\r\n      case \"Attack\":\r\n        url += \"attack\";\r\n        break;\r\n      case \"Heal\":\r\n        url += \"heal\";\r\n        break;\r\n      case \"Precise Attack\":\r\n        url += \"precise\";\r\n        break;\r\n      default:\r\n        url += \"pass\";\r\n        break;\r\n    }\r\n    try {\r\n      await http.post(url, data);\r\n    } catch (e) {\r\n      console.error(\"Unexpected error while posting toon action:\", e);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {myToons.map((toon) => {\r\n        return (\r\n          <OffenseToon\r\n            key={toon._id}\r\n            toons={toons}\r\n            myToon={toon}\r\n            enemies={fight && fight.enemies}\r\n            onSubmit={handleSubmit}\r\n          />\r\n        );\r\n      })}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Offense;\r\n","import React, { Component } from \"react\";\nimport Input from \"../form/Input\";\n\nclass DefenseToon extends Component {\n  state = {\n    roll: 0,\n    submitting: false,\n  };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.submitting) {\n      this.setState({ submitting: !this.props.attack });\n    }\n  }\n\n  handleSubmit = () => {\n    const { attack } = this.props;\n    this.setState({ submitting: true });\n    return {\n      name: \"Resolve\",\n      from: attack.to,\n      to: attack._id,\n      roll: this.state.roll,\n    };\n  };\n\n  handleRollChange = (name, value) => {\n    value = Math.max(Math.min(value, 1000), 0);\n    this.setState({\n      roll: value,\n    });\n  };\n\n  render() {\n    const { attack, onSubmit } = this.props;\n    return (\n      <div className=\"box\">\n        <h3 className=\"title is-3\">{`${attack.toon.name}: defend against ${attack.enemy.name}!`}</h3>\n        <Input\n          type=\"number\"\n          name=\"roll\"\n          value={this.state.roll}\n          onChange={this.handleRollChange}\n          error={null}\n          disabled={attack.toon.current_hp < 0}\n        />\n        <button\n          type=\"button\"\n          className={`button is-primary ${\n            this.state.submitting ? \"is-loading\" : \"\"\n          }`}\n          disabled={!Number.isInteger(this.state.roll)}\n          onClick={() => {\n            onSubmit(this.handleSubmit());\n          }}\n        >\n          Done\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default DefenseToon;\n","import React, { Component } from \"react\";\r\nimport Select from \"../form/Select\";\r\nimport MultiSelect from \"../form/MultiSelect\";\r\nimport Input from \"../form/Input\";\r\n\r\nclass DefenseEnemy extends Component {\r\n  state = {\r\n    action: \"\",\r\n    target: [],\r\n    roll: 0,\r\n    modifier: 0,\r\n    submitting: false,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (prevState.submitting && this.props.enemy.action) {\r\n      this.setState({\r\n        submitting: !this.props.enemy.action,\r\n      });\r\n    }\r\n  }\r\n\r\n  handleActionChange = (name, value) => {\r\n    this.setState({ action: value, target: [], roll: 0, modifier: 0 });\r\n  };\r\n\r\n  handleSubmit = () => {\r\n    const { enemy } = this.props;\r\n    this.setState({ submitting: true });\r\n    switch (this.state.action) {\r\n      case \"Attack\":\r\n        return {\r\n          name: \"Mob Attack\",\r\n          from: enemy._id,\r\n          to: this.state.target,\r\n          roll: this.state.roll,\r\n        };\r\n      default:\r\n        return {\r\n          name: \"Tank Buster\",\r\n          from: enemy._id,\r\n          to: this.state.target,\r\n          roll: this.state.roll,\r\n          tankBusterBonus: this.state.modifier,\r\n        };\r\n    }\r\n  };\r\n\r\n  handleTargetChange = (name, value) => {\r\n    let isValid;\r\n    if (this.state.action === \"Attack\")\r\n      isValid = value && value.length && Number.isInteger(this.state.roll);\r\n    else\r\n      isValid =\r\n        value &&\r\n        value.length &&\r\n        Number.isInteger(this.state.roll) &&\r\n        this.state.modifier;\r\n    this.setState({\r\n      target: value,\r\n      isValid,\r\n    });\r\n  };\r\n\r\n  handleRollChange = (name, value) => {\r\n    value = Math.max(Math.min(value, 1000), 0);\r\n    let isValid;\r\n    if (this.state.action === \"Attack\")\r\n      isValid =\r\n        Number.isInteger(value) &&\r\n        this.state.target &&\r\n        this.state.target.length;\r\n    else\r\n      isValid =\r\n        Number.isInteger(value) &&\r\n        this.state.target &&\r\n        this.state.target.length &&\r\n        this.state.modifier;\r\n    this.setState({\r\n      roll: value,\r\n      isValid,\r\n    });\r\n  };\r\n\r\n  handleBusterChange = (name, value) => {\r\n    const val = Math.max(value, 0);\r\n    this.setState({\r\n      modifier: val,\r\n      isValid:\r\n        val &&\r\n        this.state.target &&\r\n        this.state.target.length &&\r\n        Number.isInteger(this.state.roll),\r\n    });\r\n  };\r\n\r\n  renderAttack = () => {\r\n    const { toons } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <MultiSelect\r\n          name=\"targets\"\r\n          value={this.state.target}\r\n          list={toons}\r\n          options={{ label: \"Attack:\" }}\r\n          onChange={this.handleTargetChange}\r\n        />\r\n        <Input\r\n          type=\"number\"\r\n          name=\"roll\"\r\n          value={this.state.roll}\r\n          onChange={this.handleRollChange}\r\n          error={null}\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  renderTankBuster = () => {\r\n    const { toons } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <MultiSelect\r\n          name=\"targets\"\r\n          value={this.state.target}\r\n          list={toons}\r\n          options={{ label: \"Attack:\" }}\r\n          onChange={this.handleTargetChange}\r\n        />\r\n        <Input\r\n          type=\"number\"\r\n          name=\"roll\"\r\n          value={this.state.roll}\r\n          onChange={this.handleRollChange}\r\n          error={null}\r\n        />\r\n        <Input\r\n          type=\"number\"\r\n          name=\"buster\"\r\n          value={this.state.modifier}\r\n          options={{ label: \"Buster Bonus:\" }}\r\n          onChange={this.handleBusterChange}\r\n          error={null}\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { enemy, onSubmit } = this.props;\r\n    const done = enemy && enemy.action;\r\n    if (enemy.current_hp < 1) return null;\r\n    else\r\n      return (\r\n        <div className=\"box\">\r\n          <h3 className=\"title is-3\">{`${enemy.name}'s action`}</h3>\r\n          <Select\r\n            name=\"action\"\r\n            value={this.state.action}\r\n            list={[\r\n              { _id: \"Attack\", name: \"Attack\" },\r\n              { _id: \"Tank Buster\", name: \"Tank Buster\" },\r\n            ]}\r\n            options={{ label: \"Action:\" }}\r\n            onChange={this.handleActionChange}\r\n            disabled={done}\r\n          />\r\n\r\n          {!done && this.state.action === \"Attack\" && this.renderAttack()}\r\n          {!done &&\r\n            this.state.action === \"Tank Buster\" &&\r\n            this.renderTankBuster()}\r\n\r\n          <button\r\n            type=\"button\"\r\n            className={`button is-primary ${\r\n              this.state.submitting ? \"is-loading\" : \"\"\r\n            }`}\r\n            disabled={!this.state.isValid || done}\r\n            onClick={() => {\r\n              onSubmit(this.handleSubmit());\r\n            }}\r\n          >\r\n            Done\r\n          </button>\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nexport default DefenseEnemy;\r\n","import React from \"react\";\nimport DefenseToon from \"./DefenseToon\";\nimport DefenseEnemy from \"./DefenseEnemy\";\nimport config from \"../../config\";\nimport http from \"../../services/httpService\";\n\nfunction Defense({ fight, myToons, user }) {\n  const toons = fight.toonObjects || [];\n  const myToonIds = myToons.map((toon) => {\n    return toon._id;\n  });\n  const myAttacks =\n    fight && fight.attacks\n      ? fight.attacks.filter((attack) => {\n          return myToonIds.includes(attack.to);\n        })\n      : [];\n  const isADm = user && user.permissions && user.permissions.includes(\"DM\");\n\n  const handleSubmit = async (data) => {\n    let url = config.api + \"fights/\" + fight._id + \"/defense/\";\n    switch (data.name) {\n      case \"Mob Attack\":\n        url += \"mob-attack\";\n        break;\n      case \"Tank Buster\":\n        url += \"mob-tank-buster\";\n        break;\n      default:\n        url += \"resolve\";\n        break;\n    }\n    try {\n      console.log(\"Posting\", data, \"to\", url);\n      await http.post(url, data);\n    } catch (e) {\n      console.error(\"Unexpected error while posting mob action:\", e);\n    }\n  };\n\n  return (\n    <React.Fragment>\n      {myAttacks.map((attack) => {\n        return (\n          <DefenseToon\n            key={attack._id}\n            attack={attack}\n            onSubmit={handleSubmit}\n          />\n        );\n      })}\n      {isADm &&\n        fight &&\n        fight.enemies &&\n        fight.enemies.map((enemy) => {\n          return (\n            <DefenseEnemy\n              key={enemy._id}\n              enemy={enemy}\n              toons={toons}\n              onSubmit={handleSubmit}\n            />\n          );\n        })}\n    </React.Fragment>\n  );\n}\n\nexport default Defense;\n","import React from \"react\";\r\nimport Support from \"./Support\";\r\nimport Offense from \"./Offense\";\r\nimport Defense from \"./Defense\";\r\n\r\nfunction ActionBlock({ user, fight }) {\r\n  const myToons = (fight.toonObjects || []).filter((toon) => {\r\n    return user ? toon.user === user._id : false;\r\n  });\r\n  switch (fight.phase) {\r\n    case \"Support\":\r\n      return <Support myToons={myToons} fight={fight} />;\r\n    case \"Action\":\r\n      return <Offense myToons={myToons} fight={fight} />;\r\n    case \"Defense\":\r\n    default:\r\n      return <Defense user={user} myToons={myToons} fight={fight} />;\r\n  }\r\n}\r\n\r\nexport default ActionBlock;\r\n","import React, { Component } from \"react\";\n\nclass CombatLog extends Component {\n  state = {\n    listening: false,\n    log: [],\n  };\n\n  updateLog(event) {\n    try {\n      const action = JSON.parse(event.data);\n      const line = {\n        ts: new Date(Date.now()),\n        msg: action.msg,\n      };\n      const log = [line, ...this.state.log];\n      log.sortWithFunction((log1, log2) => {\n        return log1.ts < log2.ts;\n      }, \"descending\");\n      this.setState({ log });\n      console.log(\"Combat log just received an update:\", action);\n    } catch (e) {\n      console.error(\"Error trying to decode combat log data\", e);\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.stream && !this.state.listening) {\n      this.setState({ listening: true });\n      this.props.stream.addEventListener(\n        \"action-taken\",\n        this.updateLog.bind(this)\n      );\n      this.props.stream.addEventListener(\n        \"mob-acted\",\n        this.updateLog.bind(this)\n      );\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.props.stream && !this.state.listening) {\n      this.setState({ listening: true });\n      this.props.stream.addEventListener(\n        \"action-taken\",\n        this.updateLog.bind(this)\n      );\n      this.props.stream.addEventListener(\n        \"mob-acted\",\n        this.updateLog.bind(this)\n      );\n    }\n  }\n\n  formatTime(date) {\n    const hh = String(date.getHours()).padStart(2, \"0\");\n    const mm = String(date.getMinutes()).padStart(2, \"0\");\n    const ss = String(date.getSeconds()).padStart(2, \"0\");\n    return `${hh}:${mm}:${ss}`;\n  }\n\n  render() {\n    return (\n      <div className=\"table-container\">\n        <table className=\"table is-striped is-fullwidth\">\n          <tbody\n            style={{\n              display: \"block\",\n              height: \"200px\",\n              overflowY: \"scroll\",\n            }}\n          >\n            {this.state.log.map((line) => {\n              return (\n                <tr key={line.ts}>\n                  <td>{this.formatTime(line.ts)}</td>\n                  <td>{line.msg}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nexport default CombatLog;\n","import React from \"react\";\n\nfunction Statuses({ toons, statuses, attacks }) {\n  const renders = [];\n  if (statuses && statuses.is_covering) {\n    const target = toons.find((t) => t._id === statuses.covering);\n    renders.push(<p key={renders.length + 1}>{`Covering ${target.name}`}</p>);\n  }\n  if (statuses && statuses.is_covered) {\n    const target = toons.find((t) => t._id === statuses.covered_by);\n    renders.push(<p key={renders.length + 1}>{`Covered by ${target.name}`}</p>);\n  }\n  if (statuses && statuses.is_harrying) {\n    renders.push(\n      <p\n        key={renders.length + 1}\n      >{`Harrying with ${statuses.harrying_with}`}</p>\n    );\n  }\n  if (statuses && statuses.is_inspiring) {\n    const target = toons.find((t) => t._id === statuses.inspiring);\n    renders.push(\n      <p\n        key={renders.length + 1}\n      >{`Inspiring ${target.name} to ${statuses.inspiring_to}`}</p>\n    );\n  }\n  if (statuses && statuses.is_inspired) {\n    for (const insp of statuses.inspired) {\n      const target = toons.find((t) => t._id === insp.by);\n      renders.push(\n        <p\n          key={renders.length + 1}\n        >{`Inspired by ${target.name} to ${insp.to}`}</p>\n      );\n    }\n  }\n  if (statuses && statuses.is_guarding) {\n    const target = toons.find((t) => t._id === statuses.guarding);\n    renders.push(\n      <p key={renders.length + 1}>{`Inspiring ${target.name} to Guard`}</p>\n    );\n  }\n  if (statuses && statuses.is_guarded) {\n    for (const guard of statuses.guarded_by) {\n      const target = toons.find((t) => t._id === guard);\n      renders.push(\n        <p key={renders.length + 1}>{`Inspired by ${target.name} to Guard`}</p>\n      );\n    }\n  }\n  if (statuses && statuses.is_parrying) {\n    renders.push(<p key={renders.length + 1}>Parrying</p>);\n  }\n  if (attacks && attacks.length > 0) {\n    for (let attack of attacks) {\n      renders.push(\n        <p key={renders.length + 1}>{`Attacked by ${attack.enemy.name}`}</p>\n      );\n    }\n  }\n  return (\n    <div className=\"has-text-info\">\n      {renders.map((r) => {\n        return r;\n      })}\n    </div>\n  );\n}\n\nexport default Statuses;\n","import React from \"react\";\r\nimport Statuses from \"./Statuses\";\r\n\r\nfunction ToonLine({ toon, phase, toons, attacks }) {\r\n  const { armor, main_hand, off_hand, trait } = toon;\r\n  const hp = 40 + armor.hp + main_hand.hp + off_hand.hp + trait.hp;\r\n  let ready = false;\r\n  const myAttacks = attacks\r\n    ? attacks.filter((a) => {\r\n        return a.to === toon._id;\r\n      })\r\n    : null;\r\n  switch (phase) {\r\n    case \"Support\":\r\n      ready = toon.quickAction !== null;\r\n      break;\r\n    case \"Action\":\r\n      ready = toon.action !== null;\r\n      break;\r\n    case \"Defense\":\r\n      ready = myAttacks === null || myAttacks.length === 0;\r\n  }\r\n  const drawReadySign = (ready) => {\r\n    if (ready)\r\n      return (\r\n        <span className=\"icon is-small is-left\" style={{ color: \"green\" }}>\r\n          <i className=\"fas fa-check\" />\r\n        </span>\r\n      );\r\n    else\r\n      return (\r\n        <span className=\"icon is-small is-left\" style={{ color: \"red\" }}>\r\n          <i className=\"fas fa-exclamation\" />\r\n        </span>\r\n      );\r\n  };\r\n  return (\r\n    <div className=\"columns is-multiline my-3\">\r\n      <div className=\"column is-2 py-0\">{drawReadySign(ready)}</div>\r\n      <div className=\"column is-8 py-0\">{toon.name}</div>\r\n      <div className=\"column is-2 py-0\">{`${toon.current_hp}/${hp}`}</div>\r\n      <div className=\"column is-10 is-offset-2 py-0\">\r\n        <Statuses toons={toons} statuses={toon.statuses} attacks={myAttacks} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ToonLine;\r\n","import React from \"react\";\r\nimport ToonLine from \"./ToonLine\";\r\n\r\nfunction ToonList({ toons, phase, attacks }) {\r\n  toons = toons || [];\r\n  return (\r\n    <React.Fragment>\r\n      <h3 className=\"title is-3\">Us</h3>\r\n      {toons.map((toon) => {\r\n        return (\r\n          <ToonLine\r\n            key={toon._id}\r\n            toon={toon}\r\n            phase={phase}\r\n            toons={toons}\r\n            attacks={attacks}\r\n          />\r\n        );\r\n      })}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ToonList;\r\n","import React from \"react\";\r\n\r\nfunction Attacks({ attacks }) {\r\n  return (\r\n    <React.Fragment>\r\n      {attacks.map((attack) => {\r\n        return (\r\n          <p\r\n            key={attack._id}\r\n          >{`[${attack.roll}+${attack.bonus}] to ${attack.toon.name}`}</p>\r\n        );\r\n      })}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Attacks;\r\n","import React from \"react\";\r\n\r\nimport Attacks from \"./Attacks\";\r\n\r\nfunction EnemyLine({ enemy, phase, attacks, isDm }) {\r\n  const drawReadySign = (ready) => {\r\n    if (ready)\r\n      return (\r\n        <span className=\"icon is-small is-left\" style={{ color: \"green\" }}>\r\n          <i className=\"fas fa-check\" />\r\n        </span>\r\n      );\r\n    else\r\n      return (\r\n        <span className=\"icon is-small is-left\" style={{ color: \"red\" }}>\r\n          <i className=\"fas fa-exclamation\" />\r\n        </span>\r\n      );\r\n  };\r\n\r\n  const drawDeadSign = (enemy) => {\r\n    if (enemy.current_hp > 0) return null;\r\n    else\r\n      return (\r\n        <span className=\"icon is-small is-left\" style={{ color: \"black\" }}>\r\n          <i className=\"fas fa-skull-crossbones\"></i>\r\n        </span>\r\n      );\r\n  };\r\n\r\n  return (\r\n    <div className=\"columns is-multiline my-3\">\r\n      <div className=\"column is-2 py-0\">\r\n        {drawReadySign(phase === \"Defense\" ? enemy.action : true)}\r\n      </div>\r\n      <div className=\"column is-7 py-0\">{enemy.name}</div>\r\n      <div className=\"column is-1 py-0\">{drawDeadSign(enemy)}</div>\r\n      {isDm && (\r\n        <div className=\"column is-2 py-0\">{`${enemy.current_hp}/${enemy.hp}`}</div>\r\n      )}\r\n      <div className=\"column is-10 is-offset-2 py-0\">\r\n        <Attacks attacks={attacks} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EnemyLine;\r\n","import React from \"react\";\r\nimport EnemyLine from \"./EnemyLine\";\r\n\r\nfunction EnemyList({ enemies, phase, attacks, user }) {\r\n  enemies = enemies || [];\r\n  attacks = attacks || [];\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h3 className=\"title is-3\">Them</h3>\r\n      {enemies.map((enemy) => {\r\n        return (\r\n          <EnemyLine\r\n            key={enemy._id}\r\n            enemy={enemy}\r\n            phase={phase}\r\n            attacks={attacks.filter((a) => {\r\n              return a.from === enemy._id;\r\n            })}\r\n            isDm={user && user.permissions && user.permissions.includes(\"DM\")}\r\n          />\r\n        );\r\n      })}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default EnemyList;\r\n","import React from \"react\";\r\nimport ToonList from \"./ToonList\";\r\nimport EnemyList from \"./EnemyList\";\r\n\r\nfunction StatusPane(props) {\r\n  const { fight, user } = props;\r\n  const { toonObjects: toons, enemies, attacks } = fight;\r\n  return (\r\n    <div className=\"columns\">\r\n      <div className=\"column has-background-success-light\">\r\n        <ToonList toons={toons} phase={fight.phase} attacks={attacks} />\r\n      </div>\r\n      <div className=\"column has-background-danger-light\">\r\n        <EnemyList\r\n          enemies={enemies}\r\n          toons={toons}\r\n          phase={fight.phase}\r\n          attacks={attacks}\r\n          user={user}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StatusPane;\r\n","import React from \"react\";\r\n\r\nfunction TitleBlock({\r\n  name,\r\n  round,\r\n  phase,\r\n  user,\r\n  onAdvance,\r\n  advancing,\r\n  onDelete,\r\n  deleting,\r\n}) {\r\n  return (\r\n    <div className=\"columns mt-1\">\r\n      <div className=\"column is-three-quarters\">\r\n        <h1 className=\"title is-1\">{name}</h1>\r\n        <h2 className=\"title\">{`Round ${round} - ${phase}`}</h2>\r\n      </div>\r\n      <div className=\"column\">\r\n        {user && user.permissions && user.permissions.includes(\"DM\") && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={onAdvance}\r\n            className={`button is-warning ${advancing ? \"is-loading\" : \"\"}`}\r\n            disabled={advancing}\r\n          >\r\n            Next phase\r\n          </button>\r\n        )}\r\n      </div>\r\n      <div className=\"column\">\r\n        {user && user.permissions && user.permissions.includes(\"DM\") && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={onDelete}\r\n            className={`button is-danger ${deleting ? \"is-loading\" : \"\"}`}\r\n            disabled={deleting}\r\n          >\r\n            Delete\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TitleBlock;\r\n","import React, { useEffect, useState } from \"react\";\nimport ActionBlock from \"./combat/ActionBlock\";\nimport CombatLog from \"./combat/CombatLog\";\nimport StatusPane from \"./combat/StatusPane\";\nimport TitleBlock from \"./combat/TitleBlock\";\nimport http from \"../services/httpService\";\nimport config from \"../config\";\nimport { toast } from \"react-toastify\";\n\nfunction FightCombat({\n  stream,\n  match,\n  fights,\n  toons: allToons,\n  user,\n  history,\n}) {\n  const [advancing, setAdvancing] = useState(false);\n  const [deleting, setDeleting] = useState(false);\n  const [listening, setListening] = useState(false);\n  const fight = fights.find((f) => f._id === match.params.id) || {};\n  // console.log(fight);\n\n  useEffect(() => {\n    if (!listening && stream) {\n      setListening(true);\n      stream.addEventListener(\"fight-advance\", (e) => {\n        try {\n          const { fight: response } = JSON.parse(e.data);\n          if (fight._id === response._id) {\n            toast.info(`Now on Round#${response.round} - ${response.phase}`);\n            const audio = new Audio(config.base + \"bongos.ogg\");\n            audio.type = \"audio/ogg\";\n            audio.play();\n          }\n        } catch (e) {\n          console.error(\n            \"Unexpected error while parsing advancing fight data:\",\n            e\n          );\n        }\n      });\n      stream.addEventListener(\"fight-delete\", (e) => {\n        try {\n          const { deleted } = JSON.parse(e.data);\n          if (deleted === match.params.id) {\n            toast.warn(\n              \"A DM just concluded this fight. You have been automatically redirected.\"\n            );\n            history.replace(\"/\");\n          }\n        } catch (e) {\n          console.error(\n            \"Unexpected error while parsing deleted fight data:\",\n            e\n          );\n        }\n      });\n    }\n  });\n\n  const advanceFight = async () => {\n    setAdvancing(true);\n    const fight = fights.find((f) => f._id === match.params.id) || {};\n    try {\n      const response = await http.post(config.api + `fights/${fight._id}/next`);\n      setAdvancing(false);\n    } catch (e) {\n      toast.error(\"Oh noes! Can't advance to next phase! Bug Mel on Discord!\");\n      console.error(\"Unexpected error while advancing phases:\", e);\n    }\n  };\n\n  const deleteFight = async () => {\n    if (window.confirm(\"Delete this fight?\")) {\n      setDeleting(true);\n      const fight = fights.find((f) => f._id === match.params.id) || {};\n      try {\n        const response = await http.post(\n          config.api + `fights/${fight._id}/delete`\n        );\n        history.replace(\"/\");\n      } catch (e) {\n        toast.error(\"Oh noes! Can't delete the fight! Bug Mel on Discord!\");\n        console.error(\"Unexpected error while deleting fight:\", e);\n      }\n    } else {\n      console.log(\"do nothing\");\n    }\n  };\n\n  const { toons: fightToonIds, enemies, round, phase, name } = fight;\n  let toons = [];\n  let toonIds = fightToonIds || [];\n  if (allToons) toons = allToons.filter((t) => toonIds.includes(t._id));\n  fight.toonObjects = toons;\n  if (fight && fight.attacks) {\n    for (const attack of fight.attacks) {\n      const toon = toons.find((t) => {\n        return t._id === attack.to;\n      });\n      const enemy = enemies.find((e) => {\n        return e._id === attack.from;\n      });\n      attack.toon = toon;\n      attack.enemy = enemy;\n    }\n  }\n\n  return (\n    <React.Fragment>\n      <TitleBlock\n        name={name}\n        round={round}\n        phase={phase}\n        user={user}\n        onAdvance={advanceFight}\n        onDelete={deleteFight}\n        advancing={advancing}\n        deleting={deleting}\n      />\n      <StatusPane fight={fight} user={user} />\n      {<ActionBlock user={user} fight={fight} />}\n      {<CombatLog stream={stream} />}\n    </React.Fragment>\n  );\n}\n\nexport default FightCombat;\n","import React, { Component } from \"react\";\nimport * as yup from \"yup\";\n\nclass Form extends Component {\n  state = {\n    data: {},\n    errors: {},\n  };\n\n  validate = () => {\n    return this.schema\n      .validate(this.state.data, { abortEarly: false })\n      .then((valid) => {\n        return {};\n      })\n      .catch((e) => {\n        const errors = {};\n        for (const error of e.inner) {\n          errors[error.path] = error.message;\n        }\n        return errors;\n      });\n  };\n\n  validateProperty = (name, value) => {\n    return yup\n      .reach(this.schema, name)\n      .validate(value)\n      .then((valid) => {\n        return null;\n      })\n      .catch((e) => {\n        const regex = /\\[\\d+\\]/;\n        let msg = e.message;\n        if (e.path && e.path.match(regex) && !e.message.match(regex)) {\n          msg = e.path + \" \" + e.message;\n        }\n        return msg;\n      });\n  };\n\n  handleSubmit = async (e) => {\n    e.preventDefault();\n    const errors = await this.validate();\n    this.setState({ errors });\n    if (Object.keys(this.state.errors).length === 0) {\n      await this.doSubmit();\n    }\n  };\n\n  handleChange = async (key, value) => {\n    const state = { ...this.state };\n    state.data[key] = value;\n    const errorMessage = await this.validateProperty(key, value);\n    if (errorMessage) {\n      state.errors[key] = errorMessage;\n    } else delete state.errors[key];\n    this.setState(state);\n  };\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <h1 className=\"title is-1\">{this.state.title}</h1>\n        {this.renderBody()}\n        <button\n          type=\"submit\"\n          className=\"button is-primary\"\n          disabled={Object.keys(this.state.errors).length > 0}\n        >\n          {this.state.buttonLabel}\n        </button>\n      </form>\n    );\n  }\n}\n\nexport default Form;\n","import React from \"react\";\r\nimport Input from \"./Input\";\r\n\r\nfunction Enemy({ index, enemy, error, onChange, onRemove }) {\r\n  return (\r\n    <div className=\"box columns is-vcentered\">\r\n      <div className=\"column\">\r\n        <Input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          value={enemy.name}\r\n          onChange={(k, v) => {\r\n            onChange(k, v, index);\r\n          }}\r\n          error={error && error.name}\r\n        />\r\n      </div>\r\n      <div className=\"column\">\r\n        <Input\r\n          type=\"number\"\r\n          name=\"dc\"\r\n          value={enemy.dc}\r\n          options={{ label: \"DC\" }}\r\n          onChange={(k, v) => {\r\n            onChange(k, v, index);\r\n          }}\r\n          error={error && error.dc}\r\n        />\r\n      </div>\r\n      <div className=\"column\">\r\n        <Input\r\n          type=\"number\"\r\n          name=\"ab\"\r\n          value={enemy.ab}\r\n          options={{ label: \"AB\" }}\r\n          onChange={(k, v) => {\r\n            onChange(k, v, index);\r\n          }}\r\n          error={error && error.ab}\r\n        />\r\n      </div>\r\n      <div className=\"column\">\r\n        <Input\r\n          type=\"number\"\r\n          name=\"hp\"\r\n          value={enemy.hp}\r\n          options={{ label: \"HP\" }}\r\n          onChange={(k, v) => {\r\n            onChange(k, v, index);\r\n          }}\r\n          error={error && error.hp}\r\n        />\r\n      </div>\r\n      <div className=\"column\">\r\n        {index > 0 && (\r\n          <button\r\n            type=\"button\"\r\n            className=\"button is-danger\"\r\n            onClick={() => {\r\n              console.log(\"Going to call remove for index\", index);\r\n              onRemove(index);\r\n            }}\r\n          >\r\n            Remove\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Enemy;\r\n","import React from \"react\";\r\nimport Enemy from \"./Enemy\";\r\n\r\nfunction Enemies({ enemies, onChange, errors }) {\r\n  const regex = /^\\[(\\d+)\\]\\.(\\w+)\\s(.+)$/;\r\n  const match = errors && errors.match(regex);\r\n  const errorIndex = parseInt(match && match[1], 10);\r\n  const key = match && match[2];\r\n  const msg = match && match[3];\r\n\r\n  const zip = enemies.map((enemy, index) => {\r\n    const error = errorIndex === index ? { [key]: msg } : null;\r\n    return { enemy, error, index };\r\n  });\r\n\r\n  const handleChange = (key, value, index) => {\r\n    const clone = [...enemies];\r\n    clone[index][key] = value;\r\n    onChange(\"enemies\", clone);\r\n  };\r\n\r\n  const addEnemy = () => {\r\n    const clone = [...enemies];\r\n    clone.push({ name: \"\", dc: 0, ab: 0, hp: 1 });\r\n    onChange(\"enemies\", clone);\r\n  };\r\n\r\n  const removeEnemy = (index) => {\r\n    const clone = [...enemies];\r\n    clone.splice(index, 1);\r\n    onChange(\"enemies\", clone);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {zip.map((zipped) => {\r\n        const { index, enemy, error } = zipped;\r\n        return (\r\n          <Enemy\r\n            key={index}\r\n            index={index}\r\n            enemy={enemy}\r\n            error={error}\r\n            onChange={handleChange}\r\n            onRemove={removeEnemy}\r\n          />\r\n        );\r\n      })}\r\n      <div className=\"field\">\r\n        <button type=\"button\" className=\"button is-primary\" onClick={addEnemy}>\r\n          Add an enemy\r\n        </button>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Enemies;\r\n","import React from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport Form from \"./form/Form\";\r\nimport Input from \"./form/Input\";\r\nimport * as yup from \"yup\";\r\nimport common from \"../yemit-break-common/common.json\";\r\nimport http from \"../services/httpService\";\r\nimport config from \"../config\";\r\nimport Enemies from \"./form/Enemies\";\r\nimport MultiSelect from \"./form/MultiSelect\";\r\n\r\nclass FightCreator extends Form {\r\n  state = {\r\n    title: \"Fight\",\r\n    buttonLabel: \"Create\",\r\n    data: {\r\n      name: \"\",\r\n      toons: [],\r\n      enemies: [{ name: \"\", dc: 0, ab: 0, hp: 0 }],\r\n    },\r\n    toons: [],\r\n    errors: { name: \"\", enemies: \"\", toons: \"\" },\r\n  };\r\n\r\n  schema = yup.object().shape({\r\n    name: yup\r\n      .string()\r\n      .required()\r\n      .matches(\r\n        new RegExp(common.regexes.fight),\r\n        \"Can only contain letters, digits, space, parentheses and -_'\"\r\n      ),\r\n    toons: yup.array().of(yup.string()).required(),\r\n    enemies: yup\r\n      .array()\r\n      .of(\r\n        yup.object().shape({\r\n          name: yup\r\n            .string()\r\n            .matches(\r\n              new RegExp(common.regexes.toon),\r\n              \"Can only contain letters, digits or the characters -_' and must be 3 to 50 characters long\"\r\n            )\r\n            .required(),\r\n          dc: yup.number().integer().required(),\r\n          ab: yup.number().integer().required(),\r\n          hp: yup.number().positive().integer().required(),\r\n        })\r\n      )\r\n      .required(),\r\n  });\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      const toons = await http.get(config.api + \"toons\");\r\n      this.setState({ toons });\r\n    } catch (e) {\r\n      console.error(\r\n        \"Unexpected error while fetching toon list in fight creator\",\r\n        e\r\n      );\r\n    }\r\n  }\r\n\r\n  async doSubmit() {\r\n    const fight = await http.post(config.api + \"fights\", this.state.data);\r\n    toast.success(\"Fight created!\");\r\n    this.props.history.replace(\"/fight/\" + fight._id);\r\n  }\r\n\r\n  renderBody() {\r\n    const { data: fight, errors } = this.state;\r\n    /*type, name, value, onChange, options, error*/\r\n    return (\r\n      <React.Fragment>\r\n        <Input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          value={fight.title}\r\n          onChange={this.handleChange}\r\n          error={errors.name}\r\n        />\r\n        <MultiSelect\r\n          name=\"toons\"\r\n          options={{ label: \"Participating toons\" }}\r\n          value={fight.toons}\r\n          list={this.state.toons}\r\n          onChange={this.handleChange}\r\n          error={errors.toons}\r\n        />\r\n        <div style={{ height: \"10rem\" }} />\r\n        <Enemies\r\n          onChange={this.handleChange}\r\n          enemies={fight.enemies}\r\n          errors={errors.enemies}\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FightCreator;\r\n","import React from \"react\";\nimport Form from \"./form/Form\";\nimport * as yup from \"yup\";\nimport common from \"../yemit-break-common/common.json\";\nimport auth from \"../services/authService\";\nimport Input from \"./form/Input\";\n\nclass Register extends Form {\n  state = {\n    title: \"Register\",\n    buttonLabel: \"Register\",\n    data: {\n      email: \"\",\n      password: \"\",\n      password_confirmation: \"\",\n    },\n    errors: { email: \"\", password: \"\", password_confirmation: \"\" },\n  };\n\n  schema = yup.object({\n    email: yup.string().email().required().label(\"Email\"),\n    password: yup\n      .string()\n      .matches(\n        new RegExp(common.regexes.password),\n        \"Password must be between 5 and 25 characters\"\n      )\n      .label(\"Password\"),\n    password_confirmation: yup\n      .string()\n      .required()\n      .label(\"Password Confirmation\"),\n  });\n\n  validateProperty = (name, value) => {\n    if (name === \"password_confirmation\") {\n      return Promise.resolve(\n        value === this.state.data.password ? null : \"Passwords must match\"\n      );\n    } else {\n      return yup\n        .reach(this.schema, name)\n        .validate(value)\n        .then((valid) => {\n          return null;\n        })\n        .catch((e) => {\n          return e.message;\n        });\n    }\n  };\n\n  async doSubmit() {\n    const logged = await auth.register(this.state.data);\n    if (logged) window.location = \"/\";\n  }\n\n  renderBody() {\n    return (\n      <React.Fragment>\n        <Input\n          type=\"text\"\n          name=\"email\"\n          value={this.state.data.email}\n          onChange={this.handleChange}\n          options={{ placeholder: \"your.email@gmail.com\" }}\n          error={this.state.errors.email}\n        />\n        <Input\n          type=\"password\"\n          name=\"password\"\n          value={this.state.data.password}\n          onChange={this.handleChange}\n          options={{ placeholder: \"*****\" }}\n          error={this.state.errors.password}\n        />\n        <Input\n          type=\"password\"\n          name=\"password_confirmation\"\n          value={this.state.data.password_confirmation}\n          onChange={this.handleChange}\n          options={{ placeholder: \"*****\", label: \"Confirm Password\" }}\n          error={this.state.errors.password_confirmation}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Register;\n","import React from \"react\";\nimport * as yup from \"yup\";\nimport auth from \"../services/authService\";\nimport common from \"../yemit-break-common/common.json\";\nimport Form from \"./form/Form\";\nimport Input from \"./form/Input\";\n\nclass Login extends Form {\n  state = {\n    title: \"Login\",\n    buttonLabel: \"Login\",\n    data: {\n      email: \"\",\n      password: \"\",\n    },\n    errors: { email: \"\", password: \"\" },\n  };\n\n  schema = yup.object().shape({\n    email: yup.string().email().required().label(\"Email\"),\n    password: yup\n      .string()\n      .matches(\n        new RegExp(common.regexes.password),\n        \"Password must be between 5 and 25 characters\"\n      )\n      .label(\"Password\"),\n  });\n\n  async doSubmit() {\n    const logged = await auth.login(\n      this.state.data.email,\n      this.state.data.password\n    );\n    if (logged) window.location = \"/\";\n  }\n\n  renderBody() {\n    return (\n      <React.Fragment>\n        <Input\n          type=\"text\"\n          name=\"email\"\n          value={this.state.data.email}\n          onChange={this.handleChange}\n          options={{ placeholder: \"your.email@gmail.com\" }}\n          error={this.state.errors.email}\n        />\n        <Input\n          type=\"password\"\n          name=\"password\"\n          value={this.state.data.password}\n          onChange={this.handleChange}\n          options={{ placeholder: \"*****\" }}\n          error={this.state.errors.password}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Login;\n","import React, { Component } from \"react\";\r\nimport auth from \"../services/authService\";\r\n\r\nclass Logout extends Component {\r\n  componentDidMount() {\r\n    auth.logout();\r\n    window.location = \"/\";\r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default Logout;\r\n","import React from \"react\";\n\nfunction ButtonedNumber({ name, value, onChange, max, options }) {\n  options = options || {};\n  return (\n    <div className=\"field\">\n      <label className=\"label\" htmlFor={name}>\n        {options.label || name[0].toUpperCase() + name.slice(1)}\n      </label>\n      <div className=\"field has-addons\">\n        <div className=\"control\">\n          <button\n            type=\"button\"\n            name={name}\n            className=\"button is-primary\"\n            disabled={value === 0}\n            onClick={({ currentTarget: me }) => {\n              onChange(me.name, value - 1);\n            }}\n          >\n            -\n          </button>\n        </div>\n        <div className=\"control\">\n          <input\n            type=\"text\"\n            id={name}\n            name={name}\n            className=\"input\"\n            value={value}\n            readOnly\n          />\n        </div>\n        <div className=\"control\">\n          <button\n            type=\"button\"\n            name={name}\n            className=\"button is-primary\"\n            disabled={value === 4 || max === 6}\n            onClick={({ currentTarget: me }) => {\n              onChange(me.name, value + 1);\n            }}\n          >\n            +\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ButtonedNumber;\n","import React from \"react\";\nimport config from \"../config\";\n\nfunction ToonCard({\n  _id,\n  name,\n  gender,\n  race,\n  physical,\n  magical,\n  leadership,\n  trait,\n  armor,\n  main_hand,\n  off_hand,\n  current_hp,\n}) {\n  const stats = {\n    Smashing:\n      physical * 100 + main_hand.smashing + off_hand.smashing + trait.smashing,\n    Dodging:\n      physical * 100 +\n      armor.dodging +\n      main_hand.dodging +\n      off_hand.dodging +\n      trait.dodging,\n    Entropy:\n      magical * 100 + main_hand.entropy + off_hand.entropy + trait.entropy,\n    Harmony:\n      magical * 100 + main_hand.harmony + off_hand.harmony + trait.harmony,\n    Moxie: leadership * 100 + main_hand.moxie + off_hand.moxie + trait.moxie,\n    Wit: leadership * 100 + trait.wit,\n  };\n  const hp = 40 + armor.hp + main_hand.hp + off_hand.hp + trait.hp;\n  return (\n    <div className=\"card m-2\" style={{ width: \"18rem\", float: \"left\" }}>\n      <div className=\"card-image\">\n        <figure className=\"image\">\n          <img\n            src={`${\n              config.base\n            }images/${gender.toLowerCase()}/${race\n              .toLowerCase()\n              .replace(\"'\", \"\")\n              .replace(\" \", \"\")}.png`}\n            alt={`Portrait of ${name}`}\n          />\n        </figure>\n      </div>\n      <h1 className=\"card-header-title\">{name}</h1>\n      <div className=\"card-content\">\n        <div className=\"level\">\n          <div className=\"level-left\">\n            <img\n              className=\"level-item\"\n              src={`${config.base}images/trait/${trait.name}.png`}\n              title={trait.name}\n              alt={trait.name}\n            />\n            <img\n              className=\"level-item\"\n              src={`${config.base}images/armor/${armor.name}.png`}\n              title={armor.name + \" Armor\"}\n              alt={armor.name + \" Armor\"}\n            />\n            <img\n              className=\"level-item\"\n              src={`${config.base}images/weapon/${main_hand.name}.png`}\n              title={`Main hand: ${main_hand.name}`}\n              alt={main_hand.name}\n            />\n            {off_hand.name !== \"Empty\" && (\n              <img\n                className=\"level-item\"\n                src={`${config.base}images/weapon/${off_hand.name}.png`}\n                title={`Off hand: ${off_hand.name}`}\n                alt={off_hand.name}\n              />\n            )}\n          </div>\n        </div>\n        {Object.keys(stats).map((key) => {\n          return (\n            <div key={key} className=\"columns is-mobile\">\n              <div className=\"column my-1 py-0\">{key}</div>\n              <div className=\"column my-1 py-0\">{stats[key]}</div>\n            </div>\n          );\n        })}\n        <div className=\"columns is-mobile\">\n          <div className=\"column\">Hp</div>\n          <div className=\"column\">\n            {current_hp}/{hp}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ToonCard;\n","import React from \"react\";\nimport Select from \"./Select\";\n\nfunction WeaponSelector({ mainHand, offHand, weapons, onChange }) {\n  const wholeMainHand = weapons.find((w) => w._id === mainHand);\n  const wholeOffHand = weapons.find((w) => w._id === offHand);\n\n  const empty = weapons.find((w) => w.name === \"Empty\");\n\n  const offHandFilter = (w) => {\n    if (wholeMainHand && wholeMainHand.hands === 2) return w.name === \"Empty\";\n    else return w.hands < 2 && w.name !== \"Empty\";\n  };\n\n  const handleChange = (key, value) => {\n    onChange(key, value);\n    if (key === \"main_hand\") {\n      const wholeMainHand = weapons.find((w) => w._id === value);\n      if (wholeMainHand.hands === 2) onChange(\"off_hand\", empty._id);\n    }\n  };\n\n  return (\n    <React.Fragment>\n      {wholeMainHand && (\n        <div className=\"field\">\n          <label className=\"label\">Weapons</label>\n          <div className=\"control\">\n            <input\n              className={`input ${\n                wholeMainHand.hands + wholeOffHand.hands === 2\n                  ? \"is-success\"\n                  : \"is-danger\"\n              }`}\n              value={`${wholeMainHand.hands + wholeOffHand.hands}/2`}\n              disabled={true}\n              readOnly={true}\n            />\n          </div>\n          {mainHand.hands + offHand.hands < 2 && (\n            <p className=\"help is-danger\">You have unused hands!</p>\n          )}\n        </div>\n      )}\n      <Select\n        name=\"main_hand\"\n        label=\"Main Hand\"\n        value={wholeMainHand && wholeMainHand._id}\n        list={weapons.filter((w) => w.name !== \"Empty\")}\n        onChange={handleChange}\n      />\n      <Select\n        name=\"off_hand\"\n        label=\"Off Hand\"\n        value={wholeOffHand && wholeOffHand._id}\n        list={weapons.filter(offHandFilter)}\n        onChange={handleChange}\n        disabled={wholeMainHand && wholeMainHand.hands === 2}\n      />\n    </React.Fragment>\n  );\n}\n\nexport default WeaponSelector;\n","import React, { Component } from \"react\";\nimport * as yup from \"yup\";\nimport common from \"../yemit-break-common/common.json\";\nimport Form from \"./form/Form\";\nimport ButtonedNumber from \"./form/ButtonedNumber\";\nimport httpService from \"../services/httpService\";\nimport config from \"../config\";\nimport Select from \"./form/Select\";\nimport ToonCard from \"./ToonCard\";\nimport WeaponSelector from \"./form/WeaponSelector\";\nimport Input from \"./form/Input\";\nimport { toast } from \"react-toastify\";\n\nclass ToonEditor extends Form {\n  state = {\n    title: \"\",\n    buttonLabel: \"Save\",\n    data: {\n      _id: \"\",\n      name: \"\",\n      gender: \"\",\n      race: \"\",\n      physical: 0,\n      magical: 0,\n      leadership: 0,\n      trait: \"\",\n      armor: \"\",\n      main_hand: \"\",\n      off_hand: \"\",\n      current_hp: 40,\n    },\n    errors: {\n      name: \"\",\n    },\n    traits: [],\n    armors: [],\n    weapons: [],\n  };\n\n  schema = yup.object().shape({\n    name: yup\n      .string()\n      .matches(\n        new RegExp(common.regexes.toon),\n        \"ToonCard name must only contain letters, digits, or -_' and must be 3 to 50 characters long\"\n      )\n      .required(),\n    gender: yup.string().required(),\n    race: yup.string().required(),\n    physical: yup.number().integer().required().min(0).max(4),\n    magical: yup.number().integer().required().min(0).max(4),\n    leadership: yup.number().integer().required().min(0).max(4),\n    trait: yup.string().required(),\n    armor: yup.string().required(),\n    main_hand: yup.string().required(),\n    off_hand: yup.string().required(),\n  });\n\n  genders = [\n    { _id: \"Male\", name: \"Male\" },\n    { _id: \"Female\", name: \"Female\" },\n  ];\n  races = [\n    {\n      _id: \"Elezen\",\n      name: \"Elezen\",\n    },\n    {\n      _id: \"Hyur\",\n      name: \"Hyur\",\n    },\n    {\n      _id: \"Miqo'te\",\n      name: \"Miqo'te\",\n    },\n    {\n      _id: \"Lalafell\",\n      name: \"Lalafell\",\n    },\n    {\n      _id: \"Roegadyn\",\n      name: \"Roegadyn\",\n    },\n    {\n      _id: \"Au Ra\",\n      name: \"Au Ra\",\n    },\n    {\n      _id: \"Hrothgar\",\n      name: \"Hrothgar\",\n    },\n    {\n      _id: \"Viera\",\n      name: \"Viera\",\n    },\n  ];\n\n  getStateReadyToon(toon) {\n    return {\n      _id: toon._id,\n      is_new: false,\n      name: toon.name,\n      gender: toon.gender,\n      race: toon.race,\n      physical: toon.physical,\n      magical: toon.magical,\n      leadership: toon.leadership,\n      trait: toon.trait._id,\n      armor: toon.armor._id,\n      main_hand: toon.main_hand._id,\n      off_hand: toon.off_hand._id,\n      current_hp: toon.current_hp,\n    };\n  }\n\n  async fetchToon() {\n    if (this.props.match.params.id) {\n      const toon = await httpService.get(\n        config.api + \"toons/\" + this.props.match.params.id\n      );\n      return this.getStateReadyToon(toon);\n    } else {\n      return Promise.resolve({\n        _id: \"\",\n        is_new: true,\n        name: \"\",\n        gender: \"Female\",\n        race: \"Miqo'te\",\n        physical: 0,\n        magical: 0,\n        leadership: 0,\n        trait: this.state.traits.find((t) => t.name === \"Balanced\")._id,\n        armor: this.state.armors.find((a) => a.name === \"None\")._id,\n        main_hand: this.state.weapons.find((w) => w.name === \"Unarmed\")._id,\n        off_hand: this.state.weapons.find((w) => w.name === \"Unarmed\")._id,\n        current_hp: 40,\n      });\n    }\n  }\n\n  async componentDidMount() {\n    try {\n      const state = {};\n      state.traits = await httpService.get(config.api + \"traits\");\n      state.armors = await httpService.get(config.api + \"armors\");\n      state.weapons = await httpService.get(config.api + \"weapons\");\n      this.setState(state);\n      this.setState({ data: await this.fetchToon(), errors: {} });\n    } catch (e) {\n      console.error(\n        \"Unexpected error occurred while trying to fetch Traits, Armors and Weapons in the Toon Editor\",\n        e\n      );\n    }\n  }\n  async componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.props.match.params.id !== prevProps.match.params.id) {\n      this.setState({ data: await this.fetchToon() });\n    }\n  }\n\n  async doSubmit() {\n    const { data: toon } = this.state;\n    try {\n      if (toon.is_new) {\n        const resp = await httpService.post(`${config.api}toons/`, toon);\n        this.setState({ data: this.getStateReadyToon(resp) });\n        if (resp) toast.success(\"Created!\");\n      } else {\n        const resp = await httpService.put(\n          `${config.api}toons/${toon._id}`,\n          toon\n        );\n        this.setState({ data: this.getStateReadyToon(resp) });\n        if (resp) toast.success(\"Saved!\");\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  render() {\n    const {\n      _id,\n      name,\n      gender,\n      race,\n      physical,\n      magical,\n      leadership,\n      trait: traitId,\n      armor: armorId,\n      main_hand: mhId,\n      off_hand: ohId,\n      current_hp,\n    } = this.state.data;\n    const wholeTrait = this.state.traits.find((t) => {\n      if (traitId) {\n        return t._id === traitId;\n      } else return t.name === \"Balanced\";\n    });\n    const wholeArmor = this.state.armors.find((a) => {\n      if (armorId) {\n        return a._id === armorId;\n      } else return a.name === \"None\";\n    });\n    const mainHand = this.state.weapons.find((w) => {\n      if (mhId) {\n        return w._id === mhId;\n      } else return w.name === \"Empty\";\n    });\n    const offHand = this.state.weapons.find((w) => {\n      if (ohId) {\n        return w._id === ohId;\n      } else return w.name === \"Empty\";\n    });\n    return (\n      <div className=\"columns is-vcentered\">\n        <div className=\"column\">{Form.prototype.render.call(this)}</div>\n        <div className=\"column\">\n          {mainHand && (\n            <ToonCard\n              _id={_id}\n              name={name}\n              gender={gender}\n              race={race}\n              physical={physical}\n              magical={magical}\n              leadership={leadership}\n              trait={wholeTrait}\n              armor={wholeArmor}\n              main_hand={mainHand}\n              off_hand={offHand}\n              current_hp={current_hp}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  renderBody() {\n    const { physical, magical, leadership } = this.state.data;\n    return (\n      <React.Fragment>\n        <Input\n          type=\"text\"\n          name=\"name\"\n          value={this.state.data.name}\n          onChange={this.handleChange}\n          options={{ placeholder: \"Zename Ofzetoon...\" }}\n          error={this.state.errors.name}\n        />\n        <Select\n          name=\"gender\"\n          value={this.state.data.gender}\n          list={this.genders}\n          onChange={this.handleChange}\n        />\n        <Select\n          name=\"race\"\n          value={this.state.data.race}\n          list={this.races}\n          options={{ label: \"Species\" }}\n          onChange={this.handleChange}\n        />\n        <div className=\"field\">\n          <label className=\"label\">Attributes</label>\n          <div className=\"control\">\n            <input\n              className={`input ${\n                physical + magical + leadership === 6\n                  ? \"is-success\"\n                  : \"is-danger\"\n              }`}\n              value={`${physical + magical + leadership}/6`}\n              disabled={true}\n              readOnly={true}\n            />\n          </div>\n          {physical + magical + leadership < 6 && (\n            <p className=\"help is-danger\">You have unused attribute points!</p>\n          )}\n        </div>\n        <ButtonedNumber\n          name=\"physical\"\n          value={physical}\n          onChange={this.handleChange}\n          max={physical + magical + leadership}\n        />\n        <ButtonedNumber\n          name=\"magical\"\n          value={magical}\n          onChange={this.handleChange}\n          max={physical + magical + leadership}\n        />\n        <ButtonedNumber\n          name=\"leadership\"\n          value={leadership}\n          onChange={this.handleChange}\n          max={physical + magical + leadership}\n        />\n        <Select\n          name=\"trait\"\n          value={this.state.data.trait}\n          list={this.state.traits}\n          onChange={this.handleChange}\n        />\n        <Select\n          name=\"armor\"\n          value={this.state.data.armor}\n          list={this.state.armors}\n          onChange={this.handleChange}\n          constraint={(a) => {\n            return a.physical <= this.state.data.physical;\n          }}\n          constraintMessage={(a) => {\n            return `Physical of ${a.physical} required to wear this`;\n          }}\n        />\n        <WeaponSelector\n          mainHand={this.state.data.main_hand}\n          offHand={this.state.data.off_hand}\n          weapons={this.state.weapons}\n          onChange={this.handleChange}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ToonEditor;\n","import React, { Component } from \"react\";\nimport ToonCard from \"./ToonCard\";\n\nfunction ToonLister({ toons }) {\n  return (\n    <React.Fragment>\n      {toons.map((toon) => {\n        return <ToonCard key={toon._id} {...toon} />;\n      })}\n    </React.Fragment>\n  );\n}\n\nexport default ToonLister;\n","import React, { Component } from \"react\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"./App.css\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport auth from \"../services/authService\";\nimport Navbar from \"./navbar/Navbar\";\nimport FightCombat from \"./FightCombat\";\nimport FightCreator from \"./FightCreator\";\nimport Register from \"./Register\";\nimport Login from \"./Login\";\nimport Logout from \"./Logout\";\nimport ToonEditor from \"./ToonEditor\";\nimport ToonLister from \"./ToonLister\";\nimport config from \"../config\";\nimport http from \"../services/httpService\";\n\nclass App extends Component {\n  state = {\n    stream: null,\n    user: null,\n    allToons: [],\n    myToons: [],\n    fights: [],\n  };\n\n  async componentDidMount() {\n    const state = {};\n    state.user = auth.getCurrentUser();\n    state.fights = await http.get(config.api + \"fights\");\n    state.allToons = await http.get(config.api + \"toons\");\n    if (state.user) {\n      const myToons = await http.get(config.api + \"users/me/toons\");\n      state.myToons = myToons.map((t) => {\n        return t._id;\n      });\n    }\n    state.stream = new EventSource(config.api + \"events\");\n    state.stream.onopen = () => {\n      console.info(\"App is listening to server events\");\n    };\n    state.stream.addEventListener(\"fight-created\", (e) => {\n      try {\n        const { fight } = JSON.parse(e.data);\n        const fights = [...this.state.fights, fight];\n        this.setState({ fights });\n        toast.info(\"A DM just added a fight\");\n      } catch (e) {\n        console.error(\"Unexpected error while parsing created fight data:\", e);\n      }\n    });\n    state.stream.addEventListener(\"fight-delete\", (e) => {\n      try {\n        const { fights, toons } = JSON.parse(e.data);\n        this.setState({ fights, allToons: toons });\n        toast.info(\"A DM just concluded a fight\");\n      } catch (e) {\n        console.error(\"Unexpected error while parsing deleted fight data:\", e);\n      }\n    });\n    state.stream.addEventListener(\"fight-advance\", (e) => {\n      console.log(\"Got a fight-advance event\");\n      try {\n        const { fight, toons } = JSON.parse(e.data);\n        const fights = [...this.state.fights];\n        const i = fights.findIndex((f) => {\n          return f._id === fight._id;\n        });\n        fights[i] = fight;\n        const allToons = [...this.state.allToons];\n        for (const toon of toons) {\n          const i = allToons.findIndex((t) => {\n            return t._id === toon._id;\n          });\n          allToons[i] = toon;\n        }\n        this.setState({ fights, allToons });\n      } catch (e) {\n        console.error(\n          \"Unexpected error while parsing advancing fight data:\",\n          e\n        );\n      }\n    });\n    state.stream.addEventListener(\"action-taken\", (e) => {\n      console.log(\"Got an action-taken event\");\n      try {\n        const action = JSON.parse(e.data);\n        const allToons = [...this.state.allToons];\n        const fights = [...this.state.fights];\n        if (action.toons) {\n          for (const toon of action.toons) {\n            const i = allToons.findIndex((t) => {\n              return t._id === toon._id;\n            });\n            allToons[i] = toon;\n          }\n        }\n        if (action.fight) {\n          const i = fights.findIndex((f) => {\n            return f._id === action.fight._id;\n          });\n          fights[i] = action.fight;\n        }\n        this.setState({ allToons, fights });\n      } catch (e) {\n        console.error(\"Unexpected error while parsing action data:\", e);\n      }\n    });\n    state.stream.addEventListener(\"mob-acted\", (e) => {\n      console.log(\"Got a mob-acted event\");\n      try {\n        const action = JSON.parse(e.data);\n        const fights = [...this.state.fights];\n        if (action.fight) {\n          const i = fights.findIndex((f) => {\n            return f._id === action.fight._id;\n          });\n          fights[i] = action.fight;\n        }\n        this.setState({ fights });\n      } catch (e) {\n        console.error(\"Unexpected error while parsing mob action data:\", e);\n      }\n    });\n    state.stream.addEventListener(\"toon-created\", (e) => {\n      console.log(\"Got a toon-created event\");\n      try {\n        const { toon } = JSON.parse(e.data);\n        const stateSplice = {};\n        stateSplice.allToons = [...this.state.allToons, toon];\n        if (this.state.user) {\n          if (toon.user === this.state.user._id)\n            stateSplice.myToons = [...this.state.myToons, toon._id];\n        }\n        this.setState(stateSplice);\n      } catch (e) {\n        console.error(\"Unexpected error while parsing toon created data:\", e);\n      }\n    });\n    state.stream.addEventListener(\"toon-updated\", (e) => {\n      console.log(\"Got a toon-updated event\");\n      try {\n        const { toon } = JSON.parse(e.data);\n        const allToons = [...this.state.allToons];\n        const i = allToons.findIndex((t) => {\n          return t._id === toon._id;\n        });\n        allToons[i] = toon;\n        this.setState({ allToons });\n      } catch (e) {\n        console.error(\"Unexpected error while parsing toon updated data:\", e);\n      }\n    });\n    this.setState(state);\n  }\n\n  componentWillUnmount() {\n    if (this.state.stream) this.state.stream.close();\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <ToastContainer />\n        <Navbar\n          user={this.state.user}\n          fights={this.state.fights}\n          toons={this.state.allToons.filter((toon) => {\n            return this.state.myToons.includes(toon._id);\n          })}\n          stream={this.state.stream}\n        />\n        <div className=\"main container\">\n          <Switch>\n            <Route path=\"/my-toon/:id?\" component={ToonEditor} />\n            <Route\n              path=\"/all-toons\"\n              render={(props) => {\n                return <ToonLister toons={this.state.allToons} {...props} />;\n              }}\n            />\n            <Route\n              path=\"/fight/:id\"\n              render={(props) => {\n                return (\n                  <FightCombat\n                    user={this.state.user}\n                    fights={this.state.fights}\n                    toons={this.state.allToons}\n                    stream={this.state.stream}\n                    {...props}\n                  />\n                );\n              }}\n            />\n            <Route\n              path=\"/fight\"\n              render={(props) => {\n                return <FightCreator toons={this.state.allToons} {...props} />;\n              }}\n            />\n            <Route path=\"/register\" component={Register} />\n            <Route path=\"/login\" component={Login} />\n            <Route path=\"/logout\" component={Logout} />\n            <Redirect to=\"/all-toons\" />\n          </Switch>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport \"bulma/css/bulma.min.css\";\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nString.prototype.capitalize = function () {\n  return this[0].toUpperCase() + this.slice(1);\n};\n\nArray.prototype.sortWithFunction = function (smallerThan, ascending) {\n  let needSwapping;\n  if (ascending && ascending === \"ascending\") {\n    needSwapping = (a, b) => {\n      return !smallerThan(a, b);\n    };\n  } else {\n    needSwapping = (a, b) => {\n      return smallerThan(a, b);\n    };\n  }\n  for (let i = 0; i < this.length - 1; i++) {\n    for (let j = 0; j < this.length - 1 - i; j++) {\n      if (needSwapping(this[j], this[j + 1])) {\n        const tmp = this[j];\n        this[j] = this[j + 1];\n        this[j + 1] = tmp;\n      }\n    }\n  }\n  return this;\n};\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}